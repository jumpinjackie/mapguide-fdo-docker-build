# @import ./_setup.http

# TODO: Test cases for
# GEO.BINARYOPERATION
# GEO.SPATIALPREDICATE
###
# Boundary (WKT)
# @name geoproc_boundary_wkt
# @ref create_session

GET {{endpoint_base}}
    ?SESSION={{session}}
    &OPERATION=GEO.BOUNDARY
    &VERSION=4.0.0
    &LOCALE={{locale}}
    &CLIENTAGENT={{agent}}
    &GEOMETRY=POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))
    &FORMAT=WKT

?? status == 200
?? header content-type includes text/plain
?? body == POLYGON ((30 10, 10 20, 20 40, 40 40, 30 10))
###
# Boundary (GeoJSON)
# @name geoproc_boundary_geojson
# @ref create_session

GET {{endpoint_base}}
    ?SESSION={{session}}
    &OPERATION=GEO.BOUNDARY
    &VERSION=4.0.0
    &LOCALE={{locale}}
    &CLIENTAGENT={{agent}}
    &GEOMETRY=POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))
    &FORMAT=GEOJSON

?? status == 200
?? header content-type includes {{format_json}}
###
# Buffer (WKT)
# @name geoproc_buffer_wkt
# @ref create_session

GET {{endpoint_base}}
    ?SESSION={{session}}
    &OPERATION=GEO.BUFFER
    &VERSION=4.0.0
    &LOCALE={{locale}}
    &CLIENTAGENT={{agent}}
    &GEOMETRY=POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))
    &FORMAT=WKT
    &DISTANCE=100
    &UNITS=m
    &COORDINATESYSTEM=LL84

?? status == 200
?? header content-type includes text/plain
#?? body == POLYGON ((30.000882406799221 9.9997722772073665, 40.00110396363592 39.999703766525947, 40.001114693115142 39.999721648992384, 40.001128999087442 39.999768143405127, 40.001143305059742 39.999814637817877, 40.001157611032035 39.999859343983971, 40.001164764018185 39.999907626643363, 40.001168340511263 39.999954121056106, 40.001171917004335 40.000000615468849, 40.001168340511263 40.000047109881592, 40.001164764018185 40.000093604294335, 40.001157611032035 40.00014188695372, 40.001143305059742 40.000186593119821, 40.001128999087442 40.000233087532564, 40.001114693115142 40.000279581945307, 40.001093234156691 40.000322499864758, 40.00106819870517 40.000367206030859, 40.001043163253648 40.000408335703668, 40.001014551309048 40.000451253623126, 40.000978786378298 40.000490595049293, 40.000946597940626 40.000529936475459, 40.000907256516804 40.000567489654983, 40.000867915092982 40.000603254587865, 40.000826785422625 40.000637231274098, 40.000782079259189 40.000669419713688, 40.000735584849217 40.000701608153278, 40.000687302192709 40.000730220099584, 40.000635443043123 40.000755255552598, 40.00058537214008 40.000780291005611, 40.000531724743958 40.000801749965341, 40.000474500854757 40.00082320892507, 40.000417276965564 40.000841091391507, 40.000360053076371 40.000857185611302, 40.00030282918717 40.000869703337813, 40.000242028804898 40.000880432817674, 40.000181228422633 40.000891162297542, 40.000131157519583 40.000894738790826, 19.999868656746472 40.000894738790826, 19.999816797596889 40.000891162297542, 19.999755997214621 40.000880432817674, 19.999696985078884 40.000869703337813, 19.999637972943152 40.000857185611302, 19.999580749053955 40.000841091391507, 19.999523525164761 40.00082320892507, 19.9994680895221 40.000801749965341, 19.999414442125982 40.000780291005611, 19.999362582976396 40.000755255552598, 19.999311617950081 40.000730220099584, 19.99926333529357 40.000701608153278, 19.99921594676033 40.000669419713688, 19.999172134720165 40.000637231274098, 19.999130110926536 40.000603254587865, 19.999089875379447 40.000567489654983, 19.999053216325429 40.000529936475459, 19.999017451394682 40.000490595049293, 19.998985262957007 40.000451253623126, 19.998956651012413 40.000408335703668, 19.998949498026263 40.000397606223807, 9.9991088377020301 20.000325255732918, 9.9991079435787604 20.000323467486275, 9.9990909552366549 20.000278761320175, 9.9990766492643566 20.000234055154074, 9.9990659197851333 20.000187560741331, 9.9990569785524457 20.000141066328588, 9.9990498255662956 20.000094571915845, 9.9990462490732206 20.000047183379781, 9.9990444608266849 19.999999794843717, 9.9990462490732206 19.999952406307649, 9.9990498255662956 19.999905017771585, 9.9990569785524457 19.999858523358842, 9.9990659197851333 19.999812028946099, 9.9990766492643566 19.999765534533356, 9.9990909552366549 19.999720828367259, 9.9991079435787604 19.999676122201159, 9.9991276142906713 19.999632310158383, 9.9991490732491197 19.999590286362249, 9.9991723204541056 19.999548262566115, 9.9991991441521666 19.999508027016624, 9.9992268619734972 19.999468685590458, 9.9992572621646314 19.999431132410933, 9.9992903447255728 19.999395367478055, 9.9993243214097838 19.999361390791819, 9.9993609804638002 19.999328308228908, 9.9993985336410844 19.99929790803596, 9.9994387691881759 19.999268401966333, 9.9994798988585352 19.999241578266677, 9.999522816775432 19.999217436936981, 9.9995666288155984 19.999195083853934, 9.9996068643626881 19.999177201387489, 29.999541221896195 9.9992179207477374, 29.99954301014273 9.9992170266244162, 29.999584139813088 9.9991946735413659, 29.999627057729988 9.9991741087049597, 29.999671763893417 9.9991562262385205, 29.999716470056853 9.9991401320187254, 29.999762964466825 9.9991267201688956, 29.999809458876797 9.999115990689031, 29.999855953286769 9.9991070494558123, 29.999904235943276 9.9991007905925589, 29.999950730353248 9.9990981082225918, 29.999999013009763 9.9990963199759477, 30.00004729566627 9.9990981082225918, 30.000093790076242 9.9991007905925589, 30.00014207273275 9.9991070494558123, 30.000188567142722 9.999115990689031, 30.000235061552694 9.9991267201688956, 30.000281555962665 9.9991401320187254, 30.000326262126102 9.9991562262385205, 30.000370968289538 9.9991741087049597, 30.000413886206431 9.9991946735413659, 30.000455015876788 9.9992170266244162, 30.000496145547153 9.9992420620774318, 30.000535486970975 9.9992688857770915, 30.000573040148261 9.9992974977233935, 30.000608805079004 9.9993287920396643, 30.000644570009754 9.9993609804792545, 30.000676758447426 9.9993949571654905, 30.000707158638562 9.9994316162216919, 30.000737558829698 9.9994691694012143, 30.000764382527755 9.9995076167040597, 30.000789417979277 9.9995478522535493, 30.000810876937727 9.9995898760496829, 30.000832335896177 9.9996327939691376, 30.000850218361549 9.9996766060119153, 30.000866312580385 9.9997213121780142, 30.000880618552685 9.999766018344113, 30.000882406799221 9.9997722772073665))
###
# Buffer (GeoJSON)
# @name geoproc_buffer_geojson
# @ref create_session

GET {{endpoint_base}}
    ?SESSION={{session}}
    &OPERATION=GEO.BUFFER
    &VERSION=4.0.0
    &LOCALE={{locale}}
    &CLIENTAGENT={{agent}}
    &GEOMETRY=POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))
    &FORMAT=GEOJSON
    &DISTANCE=100
    &UNITS=m
    &COORDINATESYSTEM=LL84

?? status == 200
?? header content-type includes {{format_json}}
###
# Convex Hull (WKT)
# @name geoproc_convexhull_wkt
# @ref create_session

GET {{endpoint_base}}
    ?SESSION={{session}}
    &OPERATION=GEO.CONVEXHULL
    &VERSION=4.0.0
    &LOCALE={{locale}}
    &CLIENTAGENT={{agent}}
    &GEOMETRY=POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))
    &FORMAT=WKT

?? status == 200
?? header content-type includes text/plain
###
# Convex Hull (GeoJSON)
# @name geoproc_convexhull_geojson
# @ref create_session

GET {{endpoint_base}}
    ?SESSION={{session}}
    &OPERATION=GEO.CONVEXHULL
    &VERSION=4.0.0
    &LOCALE={{locale}}
    &CLIENTAGENT={{agent}}
    &GEOMETRY=POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))
    &FORMAT=GEOJSON

?? status == 200
?? header content-type includes {{format_json}}
###
# Geometry Info (XML)
# @name geoproc_geominfo_xml
# @ref create_session

GET {{endpoint_base}}
    ?SESSION={{session}}
    &OPERATION=GEO.GEOMETRYINFO
    &VERSION=4.0.0
    &LOCALE={{locale}}
    &CLIENTAGENT={{agent}}
    &GEOMETRY=POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))
    &FORMAT={{format_xml}}

?? status == 200
?? header content-type includes {{format_xml}}
###
# Geometry Info (GeoJSON)
# @name geoproc_geominfo_geojson
# @ref create_session

GET {{endpoint_base}}
    ?SESSION={{session}}
    &OPERATION=GEO.GEOMETRYINFO
    &VERSION=4.0.0
    &LOCALE={{locale}}
    &CLIENTAGENT={{agent}}
    &GEOMETRY=POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))
    &FORMAT={{format_json}}

?? status == 200
?? header content-type includes {{format_json}}
###
# Tessellate (WKT)
# @name geoproc_geominfo_wkt
# @ref create_session

GET {{endpoint_base}}
    ?SESSION={{session}}
    &OPERATION=GEO.TESSELLATE
    &VERSION=4.0.0
    &LOCALE={{locale}}
    &CLIENTAGENT={{agent}}
    &GEOMETRY=POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))
    &FORMAT=WKT

?? status == 200
?? header content-type includes text/plain
###
# Tessellate (GeoJSON)
# @name geoproc_geominfo_geojson
# @ref create_session

GET {{endpoint_base}}
    ?SESSION={{session}}
    &OPERATION=GEO.TESSELLATE
    &VERSION=4.0.0
    &LOCALE={{locale}}
    &CLIENTAGENT={{agent}}
    &GEOMETRY=POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))
    &FORMAT=GEOJSON

?? status == 200
?? header content-type includes {{format_json}}
###
# Distance (XML)
# @name geoproc_distance_xml
# @ref create_session

GET {{endpoint_base}}
    ?SESSION={{session}}
    &OPERATION=GEO.DISTANCE
    &VERSION=4.0.0
    &LOCALE={{locale}}
    &CLIENTAGENT={{agent}}
    &GEOMETRY=LINESTRING (0.0 1.0, 2.0 3.0, 4.0 5.0)
    &OTHERGEOMETRY=POINT XYZ (5.0 3.0 2.0)
    &COORDINATESYSTEM=LL84
    &FORMAT={{format_xml}}

?? status == 200
?? header content-type includes {{format_xml}}
###
# Distance (json)
# @name geoproc_distance_json
# @ref create_session

GET {{endpoint_base}}
    ?SESSION={{session}}
    &OPERATION=GEO.DISTANCE
    &VERSION=4.0.0
    &LOCALE={{locale}}
    &CLIENTAGENT={{agent}}
    &GEOMETRY=LINESTRING (0.0 1.0, 2.0 3.0, 4.0 5.0)
    &OTHERGEOMETRY=POINT XYZ (5.0 3.0 2.0)
    &COORDINATESYSTEM=LL84
    &FORMAT={{format_json}}

?? status == 200
?? header content-type includes {{format_json}}
###
# Distance (json clean)
# @name geoproc_distance_json_clean
# @ref create_session

GET {{endpoint_base}}
    ?SESSION={{session}}
    &OPERATION=GEO.DISTANCE
    &VERSION=4.0.0
    &LOCALE={{locale}}
    &CLIENTAGENT={{agent}}
    &GEOMETRY=LINESTRING (0.0 1.0, 2.0 3.0, 4.0 5.0)
    &OTHERGEOMETRY=POINT XYZ (5.0 3.0 2.0)
    &COORDINATESYSTEM=LL84
    &FORMAT={{format_json}}
    &CLEAN=1

?? status == 200
?? header content-type includes {{format_json}}
###
# Simplify (WKT)
# @name geoproc_simplify_wkt
# @ref create_session

GET {{endpoint_base}}
    ?SESSION={{session}}
    &OPERATION=GEO.SIMPLIFY
    &VERSION=4.0.0
    &LOCALE={{locale}}
    &CLIENTAGENT={{agent}}
    &GEOMETRY=POLYGON ((40 240, 160 241, 280 240, 280 160, 160 240, 40 140, 40 240))
    &ALGORITHM=0
    &TOLERANCE=10.0
    &FORMAT=WKT

?? status == 200
?? header content-type includes text/plain
?? body == MULTIPOLYGON (((40 240, 160 240, 40 140, 40 240)), ((160 240, 280 240, 280 160, 160 240)))
###
# Simplify (GeoJSON)
# @name geoproc_simplify_geojson
# @ref create_session

GET {{endpoint_base}}
    ?SESSION={{session}}
    &OPERATION=GEO.SIMPLIFY
    &VERSION=4.0.0
    &LOCALE={{locale}}
    &CLIENTAGENT={{agent}}
    &GEOMETRY=POLYGON ((40 240, 160 241, 280 240, 280 160, 160 240, 40 140, 40 240))
    &ALGORITHM=0
    &TOLERANCE=10.0
    &FORMAT=GEOJSON

?? status == 200
?? header content-type includes {{format_json}}